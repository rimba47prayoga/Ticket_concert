{% extends 'layout.html' %}
{% block content %}
{% load static %}
<div id="GreenDay_slide" class="carousel slide" data-ride="carousel">
    <ol class="carousel-indicators">
        <li data-target="#GreenDay_slide" data-slide-to="0" class="active"></li>
        <li data-target="#GreenDay_slide" data-slide-to="1"></li>
        <li data-target="#GreenDay_slide" data-slide-to="2"></li>
    </ol>
    <div class="carousel-inner">
        <div class="carousel-item active">
            <img class="d-block w-100" src="{% static 'img/GreenDay/GD_Banner_1.jpg' %}" alt="First slide">
        </div>
        <div class="carousel-item">
            <img class="d-block w-100" src="{% static 'img/GreenDay/GD_Banner_2.jpg' %}" alt="Second slide">
        </div>
        <div class="carousel-item">
            <img class="d-block w-100" src="{% static 'img/GreenDay/GD_Banner_3.jpg' %}" alt="Third slide">
        </div>
    </div>
    <a class="carousel-control-prev" href="#GreenDay_slide" role="button" data-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="sr-only">Previous</span>
    </a>
    <a class="carousel-control-next" href="#GreenDay_slide" role="button" data-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="sr-only">Next</span>
    </a>
</div>

<div class="container" id="albums-container">
    <div class="title">Albums</div>
</div>
<script>
    function get_url_albums(data){
        var _url = "{% static 'img/GreenDay/albums/' %}"
        var result = _url + data;
        return result;
    };
    function create_album(data){
        var container = $('div#albums-container');
        if (data.length > 1) {
            for (var i = 0; i < data.length; i++) {
                var elm = '<div class="content-grid"><a class="play-icon popup-with-zoom-anim" href="#small-dialog">'
                elm += '<img src=' + get_url_albums(data[i].picture) + ' title="allbum-name" /></a><h3>'+data[i].nameapp+'</h3><p>'+data[i].descriptions+'</p><div class="button play-icon popup-with-zoom-anim" id="btn_detail_album" data-links="'+data[i].link_url+'">Details</div></div>'
                $(elm).appendTo(container);
            }
        } else {
            var elm = '<div class="content-grid"><a class="play-icon popup-with-zoom-anim" href="#small-dialog">'
                elm += '<img src=' + get_url_albums(data[0].picture) + ' title="allbum-name" /></a><h3>'+data[0].nameapp+'</h3><p>'+data[0].descriptions+'</p><div class="button play-icon popup-with-zoom-anim" id="btn_detail_album" data-links="'+data[0].link_url+'">Details</div></div>'
                $(elm).appendTo(container);
        }
    }
</script>
<script>
    $(document).ready(function () {
        $.ajax({
            url: 'json/album/',
            success: function (data) {
                create_album(data);

            }
        });
        function clear_content_elem() {
            $('div#GreenDay_slide, div#albums-container').remove()
        };

        function handler_album_click() {
            if ($("div#btn_detail_album").is(':visible')) {
                $("div#btn_detail_album").click(function (event) {
                    console.log(this.dataset.links)
                })
            } else {
                setTimeout(handler_album_click, 1000)
            }

        };
        handler_album_click();
        
        
    })
</script>
{% endblock %}